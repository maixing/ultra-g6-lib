!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@antv/g6"),require("lodash")):"function"==typeof define&&define.amd?define(["react","@antv/g6","lodash"],t):"object"==typeof exports?exports["g6lib.min.js"]=t(require("react"),require("@antv/g6"),require("lodash")):e["g6lib.min.js"]=t(e.React,e["@antv/g6"],e.lodash)}(window,function(r,n,o){return c={},i.m=a=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){e.exports=r(5)()},function(e,t){e.exports=o},function(e,t,r){},function(e,t,r){"use strict";var c=r(6);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,o,i){if(i!==c){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),o=r(2),a=r.n(o),c=r(1),u=r.n(c),l="show",p="multiselect",f="select";function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=null,(t="graph")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}return e=n,(t=[{key:"init",value:function(e){this.graph=e}}])&&s(e.prototype,t),r&&s(e,r),n;var e,t,r}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=[[0,0],[.5,0],[1,0],[0,.5],[1,.5],[0,1],[.5,1],[1,1]],S=["#FF0000","#FF0000","#FFA500","#FFFF00","#0000FF"],O=function(){function r(){var s,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),w(b((e=this,t=v(r).call(this),s=!t||"object"!==h(t)&&"function"!=typeof t?b(e):t)),"g6Api",null),w(b(s),"initTreeGraph",function(e){m(v(r.prototype),"init",b(s)).call(b(s),e),s.registerTreeEdge(),s.registerTreeNode()}),w(b(s),"baseUrl","./demo/assets/"),w(b(s),"imageType","png"),w(b(s),"multiSelectFilter",[]),w(b(s),"collapsed",!1),w(b(s),"registerEdge",function(){u.a.registerEdge("edgeStyle",{draw:function(e,t){var r=e.startPoint,n=e.endPoint,o="#008000";return s.graph.getCurrentMode()==f&&e.selected&&(o="blue"),t.addShape("path",{attrs:{stroke:o,lineWidth:2,cursor:"pointer",endArrow:e.endArrow,path:[["M",r.x,r.y],["L",n.x,n.y]]}})},afterDraw:function(e,t){var r=s.graph.getCurrentMode();if(p!=r){var n=t.get("children")[0],o=n.getPoint(0);t.addShape("circle",{attrs:{x:o.x,y:o.y,fill:"#fff",r:3}}).animate({onFrame:function(e){var t=n.getPoint(e);return{x:t.x,y:t.y}},repeat:!0},3e3)}}})}),w(b(s),"registerNode",function(){u.a.registerNode("nodeStyle",{afterDraw:function(e,t){if(0<parseInt(e.alarm)){var r=1.2*parseFloat(e.w)/2,n=t.addShape("circle",{zIndex:-3,attrs:{x:0,y:0,r:r,fill:S[parseInt(e.alarm)],opacity:.6}}),o=t.addShape("circle",{zIndex:-2,attrs:{x:0,y:0,r:r,fill:S[parseInt(e.alarm)],opacity:.6}}),i=t.addShape("circle",{zIndex:-1,attrs:{x:0,y:0,r:r,fill:S[parseInt(e.alarm)],opacity:.6}});t.sort(),n.animate({r:1.5*r,opacity:.1,repeat:!0},3e3,"easeCubic",null,0),o.animate({r:1.5*r,opacity:.1,repeat:!0},3e3,"easeCubic",null,1e3),i.animate({r:1.5*r,opacity:.1,repeat:!0},3e3,"easeCubic",null,2e3)}},draw:function(e,t){var r=parseFloat(e.w),n=parseFloat(e.h),o=s.graph.getCurrentMode();e.selected?p==o?t.addShape("image",{attrs:{x:r/2,y:-n/1.2,width:48,height:48,img:s.baseUrl+"ck.svg",cursor:"pointer"}}):f!=o&&l!=o||t.addShape("rect",{attrs:{x:-r/2-s.selectGap,y:-n/2-s.selectGap,width:r+2*s.selectGap,height:n+2*s.selectGap,stroke:"red"}}):p==o&&t.addShape("image",{attrs:{x:r/2,y:-n/1.2,width:48,height:48,img:s.baseUrl+"uck.svg"}}),parseInt(e.alarm);var i=t.addShape("image",{attrs:{x:-r/2,y:-n/2,width:r,height:n,cursor:"pointer",img:s.baseUrl+e.neType+".svg",shadowColor:S[parseInt(e.alarm)],shadowBlur:(parseInt(e.alarm),0),shadowOffsetX:0,shadowOffsetY:0}});return t.addShape("text",{attrs:{x:0,y:1.1*n,textAlign:"center",text:e.label,fontSize:14,fill:"#00FFFF"}}),i},getAnchorPoints:function(e){return E}})}),w(b(s),"registerTreeNode",function(){u.a.registerNode("treenodeStyle",{afterDraw:function(e,t){var r=e.alarm;if(s.g6Api&&s.g6Api.cacheMap.has(e.id)&&(r=s.g6Api.cacheMap.get(e.id)),0<parseInt(r)){var n=1.2*parseFloat(e.w||30)/2,o=t.addShape("circle",{zIndex:-3,attrs:{x:0,y:0,r:n,fill:S[parseInt(e.alarm)],opacity:.6}}),i=t.addShape("circle",{zIndex:-2,attrs:{x:0,y:0,r:n,fill:S[parseInt(e.alarm)],opacity:.6}}),a=t.addShape("circle",{zIndex:-1,attrs:{x:0,y:0,r:n,fill:S[parseInt(e.alarm)],opacity:.6}});t.sort(),o.animate({r:1.5*n,opacity:.1,repeat:!0},3e3,"easeCubic",null,0),i.animate({r:1.5*n,opacity:.1,repeat:!0},3e3,"easeCubic",null,1e3),a.animate({r:1.5*n,opacity:.1,repeat:!0},3e3,"easeCubic",null,2e3)}},draw:function(e,t){var r=parseFloat(e.w||30),n=parseFloat(e.h||30),o=t.addShape("image",{attrs:{x:-r/2,y:-n/2,width:r,height:n,cursor:"pointer",img:s.baseUrl+e.imageName+"."+s.imageType}}),i=["",40,35,25],a=s.collapsed?["",70,60,50]:i;console.log("cfg.index?levelFont[cfg.index]:12----\x3e>%o,%o,%o",e,a,s.collapsed);var c=e.index?i[e.index]:12;return c=c||a[3],t.addShape("text",{attrs:{x:0,y:n,textAlign:"center",text:e.label,fill:"#00FFFF",fontSize:c}}),o}})}),w(b(s),"registerTreeEdge",function(){u.a.registerEdge("edgeStyle",{draw:function(e,t){var r=e.startPoint,n=e.endPoint,o=t.addShape("path",{attrs:{stroke:"#008000",lineWidth:2,cursor:"pointer",endArrow:e.endArrow,sourceAnchor:null,targetAnchor:null,path:[["M",r.x,r.y],["L",n.x,n.y]]}});return t.addShape("path",{attrs:{stroke:"#008000",lineWidth:2,cursor:"pointer",endArrow:e.endArrow,sourceAnchor:null,targetAnchor:null,path:[["M",n.x,n.y],["L",r.x,r.y]]}}),o},afterDraw:function(e,t){var r=t.get("children")[0],n=r.getPoint(0);t.addShape("circle",{attrs:{x:n.x,y:n.y,fill:"#fff",r:3}}).animate({onFrame:function(e){var t=r.getPoint(e);return{x:t.x,y:t.y}},repeat:!0},3e3)}})}),s.selectGap=5,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,d),e=r,(t=[{key:"init",value:function(e){m(v(r.prototype),"init",this).call(this,e),this.registerNode(),this.registerEdge()}}])&&y(e.prototype,t),n&&y(e,n),r;var e,t,n}(),_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function x(e,t){function r(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function j(e){return"function"==typeof e}var P=!1,T={Promise:undefined,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,P=e},get useDeprecatedSynchronousErrorHandling(){return P}};function k(e){setTimeout(function(){throw e},0)}var M={closed:!0,next:function(e){},error:function(e){if(T.useDeprecatedSynchronousErrorHandling)throw e;k(e)},complete:function(){}},C=Array.isArray||function(e){return e&&"number"==typeof e.length};function A(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}A.prototype=Object.create(Error.prototype);var U=A,D=function(){function u(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return u.prototype.unsubscribe=function(){var e;if(!this.closed){var t,r=this._parentOrParents,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof u)r.remove(this);else if(null!==r)for(var i=0;i<r.length;++i)r[i].remove(this);if(j(n))try{n.call(this)}catch(s){e=s instanceof U?F(s.errors):[s]}if(C(o)){i=-1;for(var a=o.length;++i<a;){var c=o[i];if(null!==(t=c)&&"object"==typeof t)try{c.unsubscribe()}catch(s){e=e||[],s instanceof U?e=e.concat(F(s.errors)):e.push(s)}}}if(e)throw new U(e)}},u.prototype.add=function(e){var t=e;if(!e)return u.EMPTY;switch(typeof e){case"function":t=new u(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof u)){var r=t;(t=new u)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=t._parentOrParents;if(null===n)t._parentOrParents=this;else if(n instanceof u){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[t]:o.push(t),t},u.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},u.EMPTY=((e=new u).closed=!0,e),u}();function F(e){return e.reduce(function(e,t){return e.concat(t instanceof U?t.errors:t)},[])}var I="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),N=function(o){function i(e,t,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=M;break;case 1:if(!e){n.destination=M;break}if("object"==typeof e){e instanceof i?(n.syncErrorThrowable=e.syncErrorThrowable,(n.destination=e).add(n)):(n.syncErrorThrowable=!0,n.destination=new R(n,e));break}default:n.syncErrorThrowable=!0,n.destination=new R(n,e,t,r)}return n}return x(i,o),i.prototype[I]=function(){return this},i.create=function(e,t,r){var n=new i(e,t,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},i}(D),R=function(c){function e(e,t,r,n){var o,i=c.call(this)||this;i._parentSubscriber=e;var a=i;return j(t)?o=t:t&&(o=t.next,r=t.error,n=t.complete,t!==M&&(j((a=Object.create(t)).unsubscribe)&&i.add(a.unsubscribe.bind(a)),a.unsubscribe=i.unsubscribe.bind(i))),i._context=a,i._next=o,i._error=r,i._complete=n,i}return x(e,c),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;T.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=T.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):k(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;k(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};T.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),T.useDeprecatedSynchronousErrorHandling)throw r;k(r)}},e.prototype.__tryOrSetError=function(e,t,r){if(!T.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(n){return T.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0):(k(n),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(N),z="function"==typeof Symbol&&Symbol.observable||"@@observable";function B(){}var L=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,r){var n=this.operator,o=function(e,t,r){if(e){if(e instanceof N)return e;if(e[I])return e[I]()}return e||t||r?new N(e,t,r):new N(M)}(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||T.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),T.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){T.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function ub(t){for(;t;){var r=t,n=r.closed,o=r.destination,i=r.isStopped;if(n||i)return!1;t=o&&o instanceof N?o:null}return!0}(e)?e.error(t):console.warn(t)}},r.prototype.forEach=function(o,e){var t=this;return new(e=V(e))(function(e,r){var n;n=t.subscribe(function(e){try{o(e)}catch(t){r(t),n&&n.unsubscribe()}},r,e)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[z]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:B}(e)(this)},r.prototype.toPromise=function(e){var n=this;return new(e=V(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},r.create=function(e){return new r(e)},r}();function V(e){if(!(e=e||T.Promise||Promise))throw new Error("no Promise impl found");return e}function W(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}W.prototype=Object.create(Error.prototype);var G,H,q=W,Z=function(n){function e(e,t){var r=n.call(this)||this;return r.subject=e,r.subscriber=t,r.closed=!1,r}return x(e,n),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},e}(D),K=function(r){function e(e){var t=r.call(this,e)||this;return t.destination=e,t}return x(e,r),e}(N),Y=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return x(e,t),e.prototype[I]=function(){return new K(this)},e.prototype.lift=function(e){var t=new X(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new q;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].next(e)},e.prototype.error=function(e){if(this.closed)throw new q;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new q;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new q;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new q;return this.hasError?(e.error(this.thrownError),D.EMPTY):this.isStopped?(e.complete(),D.EMPTY):(this.observers.push(e),new Z(this,e))},e.prototype.asObservable=function(){var e=new L;return e.source=this,e},e.create=function(e,t){return new X(e,t)},e}(L),X=function(n){function e(e,t){var r=n.call(this)||this;return r.destination=e,r.source=t,r}return x(e,n),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):D.EMPTY},e}(Y),J=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Q(e,this.predicate,this.thisArg))},e}(),Q=function(o){function e(e,t,r){var n=o.call(this,e)||this;return n.predicate=t,n.thisArg=r,n.count=0,n}return x(e,o),e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)},e}(N),$=r(3),ee=new Y,te=new Map,re=(ee.pipe((G=function(e){return!!te.has(e.type)},function(e){return e.lift(new J(G,H))})).subscribe(function(r){var e=te.get(r.type);e&&e.map(function(e,t){e&&Object($.isFunction)(e)&&Object($.has)(r,"data")&&e.call(null,r.data)})}),function re(e,t){var r=[];te.has(e)&&(r=te.get(e)),-1==r.indexOf(t)&&r.push(t),te.set(e,r)}),ne="TOOLBAR_MULTI_SELECT";function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t,r){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=se(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=function(){function r(){var o,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),le(ae((e=this,t=se(r).call(this),o=!t||"object"!==oe(t)&&"function"!=typeof t?ae(e):t)),"preSelectNode",null),le(ae(o),"preSelectNodes",[]),le(ae(o),"preSelectEdge",null),le(ae(o),"edge",null),le(ae(o),"addingEdge",!1),le(ae(o),"initToolBarEvent",function(){re(ne,function(e){e||(o.graph.findAll("node",function(e){return e.get("model").x}).forEach(function(e){var t=e.getModel();t.selected=!1,o.graph.updateItem(e,t)}),o.preSelectNodes.splice(0))})}),le(ae(o),"initNodeEvent",function(){o.graph.on("node:click",function(e){var r=e.item.getModel();r.selected=!r.selected;var t=o.graph.getCurrentMode();if(p==t)if(r.selected)o.preSelectNodes.push(r);else{var n=null;o.preSelectNodes.forEach(function(e,t){e.id==r.id&&(n=t)}),n&&o.preSelectNodes.splice(n,1)}else o.clearSelect(r),o.preSelectNode=e.item;o.graph.updateItem(e.item,r)}),o.graph.on("node:mouseover",function(e){}),o.graph.on("node:mouseout",function(e){})}),le(ae(o),"initEdgeEvent",function(){o.graph.on("edge:click",function(e){var t=e.item.getModel();t.selected=t.selected?0:1;var r=e.item;o.clearSelect(),o.preSelectEdge!=r?(o.graph.updateItem(r,t),o.preSelectEdge=r):o.preSelectEdge=null})}),le(ae(o),"initGlobalEvent",function(){o.graph.on("canvas:click",function(e){o.clearSelect()})}),le(ae(o),"initBehavior",function(){console.log("initBehavior----\x3e>%o"),u.a.registerBehavior("addNode",{getEvents:function(){return{"canvas:click":"onClick"}},onClick:function(e){this.graph.addItem("node",{w:48,h:48,type:"default",shape:"nodeStyle",label:"ellipse",img:"../demo/assets/123.svg",selected:!1,x:e.x,y:e.y,id:u.a.Util.uniqueId()})}}),u.a.registerBehavior("addEdge",{getEvents:function(){return{"node:click":"onClick",mousemove:"onMousemove","edge:click":"onEdgeClick"}},onClick:function(e){console.log("onClick----\x3e>%o",e);var t=e.item,r={x:e.x,y:e.y},n=t.getModel();this.addingEdge&&this.edge?(this.graph.updateItem(this.edge,{target:n.id}),this.edge=null,this.addingEdge=!1):(this.edge=this.graph.addItem("edge",{source:n.id,target:r,shape:"edgeStyle",selected:!1,endArrow:!0}),this.addingEdge=!0)},onMousemove:function(e){var t={x:e.x,y:e.y};this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t})},onEdgeClick:function(e){var t=e.item;this.addingEdge&&this.edge==t&&(this.graph.removeItem(this.edge),this.edge=null,this.addingEdge=!1)}}),o.graph.addBehaviors("addEdge","addEdge"),o.graph.addBehaviors("addNode","addNode")}),le(ae(o),"changeAnchor",function(e,t){if(!e.target.isKeyShape){var r=e.target._attrs;r.cursor="crosshair",e.target._cfg,("inner"==r.type?r.outer:e.target).animate({r:t?10:7,repeat:!1},500,"easeCubic",null,0)}}),le(ae(o),"clearSelect",function(e){if(o.preSelectNode){var t=o.preSelectNode.getModel();t.selected=t.id==e.id,o.graph.updateItem(o.preSelectNode,t),o.preSelectNode=null}if(o.preSelectEdge){var r=o.preSelectEdge.getModel();r.selected=!1,o.graph.updateItem(o.preSelectEdge,r),o.preSelectEdge=null}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(r,d),e=r,(t=[{key:"init",value:function(e){ce(se(r.prototype),"init",this).call(this,e),this.graph&&(this.initNodeEvent(),this.initEdgeEvent(),this.initGlobalEvent(),this.initBehavior(),this.initToolBarEvent())}}])&&ie(e.prototype,t),n&&ie(e,n),r;var e,t,n}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=function(){function n(){var r,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),be(he((e=this,t=de(n).call(this),r=!t||"object"!==fe(t)&&"function"!=typeof t?he(e):t)),"onDrag",function(e){r.graph.setMode(e.model),r.graph.refresh()}),be(he(r),"onEdit",function(e){r.graph.setMode(e.model),r.graph.refresh()}),be(he(r),"onSelect",function(e){r.graph.setMode(e.model),r.graph.refresh()}),be(he(r),"onZoomin",function(e){if(r.graph){var t=r.graph.getZoom();r.graph.zoomTo(t+.5)}}),be(he(r),"onZoomout",function(e){if(r.graph){var t=r.graph.getZoom();r.graph.zoomTo(t-.5)}}),be(he(r),"onCancel",function(e){}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(n,d),n}();function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=function(){function r(){var i,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Se(we((e=this,t=ve(r).call(this),i=!t||"object"!==me(t)&&"function"!=typeof t?we(e):t)),"cacheMap",new Map),Se(we(i),"getNodes",function(){}),Se(we(i),"getLines",function(){var e=i.graph.getEdges(),r=[];return e.forEach(function(e){var t=e.getModel();r.push(t)}),r}),Se(we(i),"updateDatas",function(e){}),Se(we(i),"clearDatas",function(){}),Se(we(i),"getAllData",function(){var e=i.graph.getNodes(),r=[];return e.forEach(function(e){var t=e.getModel();r.push(t)}),r}),Se(we(i),"addAlarm",function(e,t,r){console.log("----\x3e>%o,%o",e,t);var n=i.graph.findById(e);if(n){var o=n.getModel();o.alarm=t.toString(),console.log("addAlarm----\x3e>%o",o),i.graph.updateItem(n,o)}else i.cacheMap.set(e,t)}),Se(we(i),"addAlarms",function(e,t,r){}),Se(we(i),"clearAlarm",function(e,t){}),Se(we(i),"clearAlarms",function(e,t){}),Se(we(i),"getSelectsNode",function(){var e=i.graph.getNodes(),r=[];return e.forEach(function(e){var t=e.getModel();t.selected&&r.push(t)}),r}),Se(we(i),"updateSelectNode",function(e){}),Se(we(i),"updateNodeById",function(e,t){}),Se(we(i),"removeNodeById",function(){}),Se(we(i),"removeNodeByIds",function(e){}),Se(we(i),"addNode",function(e){}),Se(we(i),"getNodeById",function(e){var t=i.graph.findById(e);if(t)return t.getModel()}),Se(we(i),"getSelectLine",function(){var e=i.graph.getEdges(),r=[];return e.forEach(function(e){var t=e.getModel();t.selected&&r.push(t)}),r}),Se(we(i),"updateLineStyle",function(e,t){}),Se(we(i),"removeLineById",function(e){}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(r,d),r}(),_e={click:"Click",contextmenu:"ContextMenu",dblclick:"DoubleClick",drag:"Drag",dragend:"DragEnd",dragenter:"DragEnter",dragleave:"DragLeave",dragstart:"DragStart",drop:"Drop",mousedown:"MouseDown",mouseenter:"MouseEnter",mouseleave:"MouseLeave",mouseover:"MouseMover",mouseup:"MouseUp",mouseout:"MouseOut"},xe={beforeadditem:"onBeforeadditem",afteradditem:"onAfteradditem",beforeremoveitem:"onBeforeremoveitem",afterremoveitem:"onAfterremoveitem",beforeupdateitem:"onBeforeupdateitem",afterupdateitem:"onAfterupdateitem",beforeitemvisibilitychange:"onBeforeitemvisibilitychange",afteritemvisibilitychange:"onAfteritemvisibilitychange",beforeitemstatechange:"onBeforeitemstatechange",afteritemstatechange:"onAfteritemstatechange",beforeitemrefresh:"onBeforeitemrefresh",afteritemrefresh:"onAfteritemrefresh",beforeitemstatesclear:"onBeforeitemstatesclear",afteritemstatesclear:"onAfteritemstatesclear"},je=Object.keys(_e),Pe=Object.keys(xe);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=function(){function o(e){var n,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ue(Ce((t=this,r=Me(o).call(this,e),n=!r||"object"!==Te(r)&&"function"!=typeof r?Ce(t):r)),"state",{currentIndex:-1}),Ue(Ce(n),"toolbar",null),Ue(Ce(n),"onIconClick",function(e,t){var r=-1;e.index!=n.state.currentIndex&&(r=e.index),r=e.index,n.setState({currentIndex:r}),n.toolbar&&n.toolbar["on".concat(e.eventType)](e)}),n.icons=[{name:"拖动",icon:"drag",eventType:"Drag",model:"drag",index:1},{name:"编辑",icon:"edit",eventType:"Edit",model:"edite",index:2},{name:"选择",icon:"select",eventType:"Select",model:"select",index:3},{name:"放大",icon:"zoomin",eventType:"Zoomin",index:4},{name:"缩小",icon:"zoomout",eventType:"Zoomout",index:5},{name:"取消",icon:"cancel",eventType:"Cancel",index:6}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(o,i.a.Component),e=o,(t=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var r=this;return i.a.createElement("div",{className:"toolbar-wrap"},this.icons.map(function(e,t){return i.a.createElement("span",{className:"toolbaricon ".concat(r.state.currentIndex==e.index?"toolbaricon-select":"toolbaricon-unselect"),onClick:r.onIconClick.bind(r,e)},i.a.createElement("span",{className:"icon ".concat(e.icon),title:e.name}))}))}}])&&ke(e.prototype,t),r&&ke(e,r),o;var e,t,r}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(4);var Ve=function(){function n(e){var a,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Le(ze((t=this,r=Re(n).call(this,e),a=!r||"object"!==Fe(r)&&"function"!=typeof r?ze(t):r)),"state",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ie(r,!0).forEach(function(e){Le(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ie(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},a.props)),Le(ze(a),"destroy",function(){a.graph&&(a.graph.stopAnimate(),a.graph.destroy())}),Le(ze(a),"shouldComponentUpdate",function(t,e){var r=!1;return Object.keys(t).forEach(function(e){a.props.hasOwnProperty(e)&&t[e]!=a.props[e]&&(r=!0)}),a.props.datas!=t.datas&&a.graph&&a.setData(t.datas,!0),r}),Le(ze(a),"setData",function(e){var t=1<arguments.length&&arguments[1]!==undefined&&arguments[1],r=a.topoWrap.getBoundingClientRect(),n=0;if(e.nodes.forEach(function(e){var t=parseInt(e.y);n<t&&(n=t)}),t&&a.graph.clear(),a.state.userLayout){var o=e.nodes.length,i=r.width/(o+1);e.nodes.forEach(function(e,t){e.x=i*(t+1),e.y=r.height/3})}a.state.fitView||a.graph.changeSize(a.sourceRect.width,n>a.sourceRect.height?1.05*n:a.sourceRect.height),a.graph.changeData(e),a.state.fitView&&a.graph.fitView(a.state.fitGap)}),Le(ze(a),"componentWillUnmount",function(){window.removeEventListener("resize",a.resize)}),Le(ze(a),"initUtil",function(){a.g6Api.init(a.graph),a.toolbarUtil.init(a.graph),a.graphEventUtil.init(a.graph),a.registerUtil.init(a.graph),a.registerUtil.baseUrl=a.state.baseUrl}),Le(ze(a),"initResizeEvent",function(){window.addEventListener("resize",a.resize)}),Le(ze(a),"resize",function(){clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(function(){},500)}),Le(ze(a),"addListener",function(e,t,r){"function"==typeof r&&e.on(t,r)}),a.graph=null,a.registerUtil=new O,a.graphEventUtil=new pe,a.toolbarUtil=new ge,a.g6Api=new Oe,a.resizeTimer=0,a.ctrlKey=!1,a.sourceRect={width:0,height:0,left:0,top:0,datas:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(n,i.a.Component),e=n,(t=[{key:"componentDidMount",value:function(){var t=this,e=this.topoWrap.getBoundingClientRect();e&&(this.graph=new u.a.Graph({container:this.props.el,width:e.width,renderer:"canvas",height:e.height-4,fitView:this.state.fitView,pixeRatio:100,modes:{"default":["drag-canvas","zoom-canvas","click-select",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}],addEdge:["addEdge","drag-node",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}],addNode:["addNode","drag-node",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}],edite:["drag-node","addEdge","addNode",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}],show:["drag-canvas","zoom-canvas",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}],multiselect:["drag-node","drag-canvas","click-select","zoom-canvas",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return"text"===e.target.type&&!!t.ctrlKey}}],select:["drag-node",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}],drag:["drag-canvas",{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}]}}),this.sourceRect={width:e.width,height:e.height,datas:this.state.datas},this.initUtil(),this.initEvent(),this.toolbar&&(this.toolbar.toolbar=this.toolbarUtil),this.graph.setMode(this.state.model),this.setData(this.state.datas),this.graph.render()),document.onkeydown=function(e){t.ctrlKey=e.ctrlKey},document.onkeyup=function(e){t.ctrlKey=e.ctrlKey}}},{key:"initEvent",value:function(){var r=this,n=this.addListener;je.forEach(function(e){var t=_e[e];n(r.graph,"node:".concat(e),r.props["onNode".concat(t)]),n(r.graph,"edge:".concat(e),r.props["onEdge".concat(t)]),n(r.graph,"canvas:".concat(e),r.props["onCanvas".concat(t)])}),Pe.forEach(function(e){n(r.page,[e],r.props[xe[e]])})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"topowrap",ref:function(e){t.topoWrap=e}},i.a.createElement("div",{className:"topo-content",id:this.props.el}),this.state.showToolBar?i.a.createElement(De,{ref:function(e){t.toolbar=e}}):null)}}])&&Ne(e.prototype,t),r&&Ne(e,r),n;var e,t,r}();function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Le(Ve,"defaultProps",{el:"topoEl",datas:[],baseUrl:"../demo/assets/",model:"drag",nodeMenu:[],edgeMenu:[],multiSelectFilter:[],showToolBar:!0,fitView:!0,moveCenter:!1,userLayout:!1,fitGap:100}),Le(Ve,"propTypes",{el:a.a.string.isRequired,datas:a.a.array.isRequired}),r(4);var Xe=function(){function o(e){var n,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ye(Ze((t=this,r=qe(o).call(this,e),n=!r||"object"!==We(r)&&"function"!=typeof r?Ze(t):r)),"state",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ge(r,!0).forEach(function(e){Ye(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ge(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},n.props)),Ye(Ze(n),"destroy",function(){n.graph&&(n.g6Api.cacheMap.clear(),n.graph.stopAnimate(),n.graph.destroy())}),Ye(Ze(n),"clear",function(){n.graph&&(n.g6Api.cacheMap.clear(),n.graph.stopAnimate(),n.graph.clear())}),Ye(Ze(n),"shouldComponentUpdate",function(t,e){var r=!1;return Object.keys(t).forEach(function(e){n.props.hasOwnProperty(e)&&t[e]!=n.props[e]&&(r=!0)}),n.props.datas!=t.datas&&(n.topoWrap.getBoundingClientRect(),n.graph&&(n.graph.clear(),n.graph.changeData(t.datas))),r}),Ye(Ze(n),"componentWillUnmount",function(){window.removeEventListener("resize",n.resize)}),Ye(Ze(n),"initResizeEvent",function(){window.addEventListener("resize",n.resize)}),Ye(Ze(n),"resize",function(){clearTimeout(n.resizeTimer),n.resizeTimer=setTimeout(function(){},500)}),Ye(Ze(n),"addListener",function(e,t,r){"function"==typeof r&&e.on(t,r)}),n.graph=null,n.g6Api=new Oe,n.registerUtil=new O,n.preZoom=1,n.sourceRect={width:0,height:0,left:0,top:0,datas:[]},n.levelColos=["#FF0000","#FF0000","#FFA500","#FFFF00","#0000FF"],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(o,i.a.Component),e=o,(t=[{key:"componentDidMount",value:function(){var o=this,e=this.topoWrap.getBoundingClientRect();if(e){var t={dendrogram:{type:"dendrogram",direction:"LR",nodeSep:this.state.nodeSep,rankSep:this.state.rankSep,radial:this.state.radial}};this.graph=new u.a.TreeGraph({container:this.props.el,width:e.width,height:e.height-4,pixelRatio:2,modes:{"default":["drag-canvas","zoom-canvas",{type:"collapse-expand",onChange:function(e,t){if(t||(o.preZoom=o.graph.getZoom()),o.graph.refreshLayout(!0),o.graph.paint(),t){var r=o.graph.get("width"),n=o.graph.get("height");o.graph.zoomTo(o.preZoom,{x:r/2,y:n/2+.01*n})}return o.registerUtil.collapsed=t}},{type:"tooltip",formatText:function(e){return e.label},shouldUpdate:function(e){return!0}}]},fitView:!0,animate:!0,linkCenter:!1,layout:t.dendrogram});var r=this.state.datas;this.registerUtil.baseUrl=this.state.baseUrl,this.g6Api.init(this.graph),this.registerUtil.initTreeGraph(this.graph),this.registerUtil.g6Api=this.g6Api,this.graph.node(function(e){return{shape:"treenodeStyle",label:e.name,size:[e.w,e.h],id:e.id,img:o.state.baseUrl+e.imageName+"."+o.state.imageType,style:{cursor:"pointer"},labelCfg:{position:"bottom",style:{fill:"#00FFFF",fontSize:20}}}}),this.graph.edge(function(){return{color:"#fcfdfd",label:"",shape:"edgeStyle"}}),this.initEvent(),this.graph.data(r),this.graph.render()}}},{key:"initEvent",value:function(){var r=this,n=this.addListener;je.forEach(function(e){var t=_e[e];n(r.graph,"node:".concat(e),r.props["onNode".concat(t)]),n(r.graph,"edge:".concat(e),r.props["onEdge".concat(t)]),n(r.graph,"canvas:".concat(e),r.props["onCanvas".concat(t)])}),Pe.forEach(function(e){n(r.page,[e],r.props[xe[e]])})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"topowrap",ref:function(e){t.topoWrap=e}},i.a.createElement("div",{className:"topo-content",id:this.props.el}))}}])&&He(e.prototype,t),r&&He(e,r),o;var e,t,r}();Ye(Xe,"defaultProps",{el:"topoEl",datas:[],baseUrl:"./demo/assets/",model:"multiselect",imageType:"png",nodeMenu:[],edgeMenu:[],showToolBar:!0,nodeSep:5,rankSep:400,radial:!0}),Ye(Xe,"propTypes",{el:a.a.string.isRequired,datas:a.a.array.isRequired});var Je={version:"1.0",author:"maixing",TopoView:Ve,TreeTopoView:Xe,EventBus:undefined,EventConsts:undefined};t["default"]=Je}],i.c=c,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=7);function i(e){if(c[e])return c[e].exports;var t=c[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var a,c});