!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@antv/g6"),require("lodash")):"function"==typeof define&&define.amd?define(["react","@antv/g6","lodash"],t):"object"==typeof exports?exports["g6lib.min.js"]=t(require("react"),require("@antv/g6"),require("lodash")):e["g6lib.min.js"]=t(e.React,e["@antv/g6"],e.lodash)}(window,function(r,n,o){return s={},i.m=c=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,r){e.exports=r(4)()},function(e,t,r){"use strict";var s=r(5);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,o,i){if(i!==s){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),o=r(3),c=r.n(o),s=r(1),u=r.n(s),a="multiselect",l="select";function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=null,(t="graph")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}return e=n,(t=[{key:"init",value:function(e){this.graph=e}}])&&f(e.prototype,t),r&&f(e,r),n;var e,t,r}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=[[0,0],[.5,0],[1,0],[0,.5],[1,.5],[0,1],[.5,1],[1,1]],E=function(){function r(){var c,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),v(b((e=this,t=g(r).call(this),c=!t||"object"!==h(t)&&"function"!=typeof t?b(e):t)),"registerEdge",function(){u.a.registerEdge("edgeStyle",{draw:function(e,t){var r=e.startPoint,n=e.endPoint,o="#ccc";return c.graph.getCurrentMode()==l&&e.selected&&(o="blue"),t.addShape("path",{attrs:{stroke:o,lineWidth:2,cursor:"pointer",endArrow:e.endArrow,path:[["M",r.x,r.y],["L",n.x,n.y]]}})}})}),v(b(c),"registerNode",function(){u.a.registerNode("nodeStyle",{draw:function(e,t){var r=e.w,n=e.h,o=c.graph.getCurrentMode();e.selected?a==o?t.addShape("image",{attrs:{x:r/2,y:-n/1.2,width:16,height:16,img:"../demo/assets/ck.svg",cursor:"pointer"}}):t.addShape("rect",{attrs:{x:-r/2-c.selectGap,y:-n/2-c.selectGap,width:r+2*c.selectGap,height:n+2*c.selectGap,stroke:"red"}}):a==o&&t.addShape("image",{attrs:{x:r/2,y:-n/1.2,width:16,height:16,img:"../demo/assets/uck.svg"}});var i=t.addShape("image",{attrs:{x:-r/2,y:-n/2,width:r,height:n,cursor:"pointer",img:"../demo/assets/"+e.type+".svg"}});return t.addShape("text",{attrs:{x:0,y:1.1*n,textAlign:"center",text:e.label,fill:"#000"}}),i},getAnchorPoints:function(e){return w}})}),c.selectGap=5,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,p),e=r,(t=[{key:"init",value:function(e){y(g(r.prototype),"init",this).call(this,e),this.registerNode(),this.registerEdge()}}])&&d(e.prototype,t),n&&d(e,n),r;var e,t,n}(),_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function S(e,t){function r(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function O(e){return"function"==typeof e}var j=!1,P={Promise:undefined,set useDeprecatedSynchronousErrorHandling(e){j=e},get useDeprecatedSynchronousErrorHandling(){return j}};function x(e){setTimeout(function(){throw e},0)}var T={closed:!0,next:function(e){},error:function(e){if(P.useDeprecatedSynchronousErrorHandling)throw e;x(e)},complete:function(){}},k=Array.isArray||function(e){return e&&"number"==typeof e.length};function M(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}M.prototype=Object.create(Error.prototype);var N=M,D=function(){function a(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return a.prototype.unsubscribe=function(){var e;if(!this.closed){var t,r=this._parentOrParents,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof a)r.remove(this);else if(null!==r)for(var i=0;i<r.length;++i)r[i].remove(this);if(O(n))try{n.call(this)}catch(u){e=u instanceof N?C(u.errors):[u]}if(k(o)){i=-1;for(var c=o.length;++i<c;){var s=o[i];if(null!==(t=s)&&"object"==typeof t)try{s.unsubscribe()}catch(u){e=e||[],u instanceof N?e=e.concat(C(u.errors)):e.push(u)}}}if(e)throw new N(e)}},a.prototype.add=function(e){var t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){var r=t;(t=new a)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=t._parentOrParents;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[t]:o.push(t),t},a.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},a.EMPTY=((e=new a).closed=!0,e),a}();function C(e){return e.reduce(function(e,t){return e.concat(t instanceof N?t.errors:t)},[])}var A="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),I=function(o){function i(e,t,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=T;break;case 1:if(!e){n.destination=T;break}if("object"==typeof e){e instanceof i?(n.syncErrorThrowable=e.syncErrorThrowable,(n.destination=e).add(n)):(n.syncErrorThrowable=!0,n.destination=new B(n,e));break}default:n.syncErrorThrowable=!0,n.destination=new B(n,e,t,r)}return n}return S(i,o),i.prototype[A]=function(){return this},i.create=function(e,t,r){var n=new i(e,t,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},i}(D),B=function(s){function e(e,t,r,n){var o,i=s.call(this)||this;i._parentSubscriber=e;var c=i;return O(t)?o=t:t&&(o=t.next,r=t.error,n=t.complete,t!==T&&(O((c=Object.create(t)).unsubscribe)&&i.add(c.unsubscribe.bind(c)),c.unsubscribe=i.unsubscribe.bind(i))),i._context=c,i._next=o,i._error=r,i._complete=n,i}return S(e,s),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;P.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=P.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):x(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;x(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};P.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),P.useDeprecatedSynchronousErrorHandling)throw r;x(r)}},e.prototype.__tryOrSetError=function(e,t,r){if(!P.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(n){return P.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0):(x(n),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(I),R="function"==typeof Symbol&&Symbol.observable||"@@observable";function U(){}var L=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,r){var n=this.operator,o=function(e,t,r){if(e){if(e instanceof I)return e;if(e[A])return e[A]()}return e||t||r?new I(e,t,r):new I(T)}(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||P.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),P.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){P.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function tb(t){for(;t;){var r=t,n=r.closed,o=r.destination,i=r.isStopped;if(n||i)return!1;t=o&&o instanceof I?o:null}return!0}(e)&&e.error(t)}},r.prototype.forEach=function(o,e){var t=this;return new(e=z(e))(function(e,r){var n;n=t.subscribe(function(e){try{o(e)}catch(t){r(t),n&&n.unsubscribe()}},r,e)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[R]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:U}(e)(this)},r.prototype.toPromise=function(e){var n=this;return new(e=z(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},r.create=function(e){return new r(e)},r}();function z(e){if(!(e=e||P.Promise||Promise))throw new Error("no Promise impl found");return e}function H(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}H.prototype=Object.create(Error.prototype);var q,G,V=H,W=function(n){function e(e,t){var r=n.call(this)||this;return r.subject=e,r.subscriber=t,r.closed=!1,r}return S(e,n),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},e}(D),Y=function(r){function e(e){var t=r.call(this,e)||this;return t.destination=e,t}return S(e,r),e}(I),Z=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return S(e,t),e.prototype[A]=function(){return new Y(this)},e.prototype.lift=function(e){var t=new F(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new V;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].next(e)},e.prototype.error=function(e){if(this.closed)throw new V;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new V;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new V;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new V;return this.hasError?(e.error(this.thrownError),D.EMPTY):this.isStopped?(e.complete(),D.EMPTY):(this.observers.push(e),new W(this,e))},e.prototype.asObservable=function(){var e=new L;return e.source=this,e},e.create=function(e,t){return new F(e,t)},e}(L),F=function(n){function e(e,t){var r=n.call(this)||this;return r.destination=e,r.source=t,r}return S(e,n),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):D.EMPTY},e}(Z),K=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new J(e,this.predicate,this.thisArg))},e}(),J=function(o){function e(e,t,r){var n=o.call(this,e)||this;return n.predicate=t,n.thisArg=r,n.count=0,n}return S(e,o),e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)},e}(I),Q=r(2),X=new Z,$=new Map,ee=(X.pipe((q=function(e){return!!$.has(e.type)},function(e){return e.lift(new K(q,G))})).subscribe(function(r){var e=$.get(r.type);e&&e.map(function(e,t){e&&Object(Q.isFunction)(e)&&Object(Q.has)(r,"data")&&e.call(null,r.data)})}),function ee(e,t){var r=[];$.has(e)&&(r=$.get(e)),-1==r.indexOf(t)&&r.push(t),$.set(e,r)}),te="TOOLBAR_MULTI_SELECT";function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t,r){return(ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae=function(){function r(){var o,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),ue(oe((e=this,t=ce(r).call(this),o=!t||"object"!==re(t)&&"function"!=typeof t?oe(e):t)),"preSelectNode",null),ue(oe(o),"preSelectNodes",[]),ue(oe(o),"preSelectEdge",null),ue(oe(o),"edge",null),ue(oe(o),"addingEdge",!1),ue(oe(o),"initToolBarEvent",function(){ee(te,function(e){e||(o.graph.findAll("node",function(e){return e.get("model").x}).forEach(function(e){var t=e.getModel();t.selected=!1,o.graph.updateItem(e,t)}),o.preSelectNodes.splice(0))})}),ue(oe(o),"initNodeEvent",function(){o.graph.on("node:click",function(e){var r=e.item.getModel();r.selected=!r.selected;var t=o.graph.getCurrentMode();if(a==t)if(r.selected)o.preSelectNodes.push(r);else{var n=null;o.preSelectNodes.forEach(function(e,t){e.id==r.id&&(n=t)}),n&&o.preSelectNodes.splice(n,1)}else o.clearSelect(),o.preSelectNode=e.item;o.graph.updateItem(e.item,r)}),o.graph.on("node:mouseover",function(e){o.changeAnchor(e,!0)}),o.graph.on("node:mouseout",function(e){o.changeAnchor(e,!1)})}),ue(oe(o),"initEdgeEvent",function(){o.graph.on("edge:click",function(e){var t=e.item.getModel();t.selected=!t.selected;var r=e.item;o.clearSelect(),o.preSelectEdge!=r?(o.graph.updateItem(r,t),o.preSelectEdge=r):o.preSelectEdge=null})}),ue(oe(o),"initGlobalEvent",function(){o.graph.on("canvas:click",function(e){o.clearSelect()})}),ue(oe(o),"initBehavior",function(){u.a.registerBehavior("addNode",{getEvents:function(){return{"canvas:click":"onClick"}},onClick:function(e){this.graph.addItem("node",{w:48,h:48,type:"default",shape:"nodeStyle",label:"ellipse",img:"../demo/assets/123.svg",selected:!1,x:e.x,y:e.y,id:u.a.Util.uniqueId()})}}),u.a.registerBehavior("addEdge",{getEvents:function(){return{"node:click":"onClick",mousemove:"onMousemove","edge:click":"onEdgeClick"}},onClick:function(e){var t=e.item,r={x:e.x,y:e.y},n=t.getModel();this.addingEdge&&this.edge?(this.graph.updateItem(this.edge,{target:n.id}),this.edge=null,this.addingEdge=!1):(this.edge=this.graph.addItem("edge",{source:n.id,target:r,shape:"edgeStyle",selected:!1,endArrow:!0}),this.addingEdge=!0)},onMousemove:function(e){var t={x:e.x,y:e.y};this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t})},onEdgeClick:function(e){var t=e.item;this.addingEdge&&this.edge==t&&(this.graph.removeItem(this.edge),this.edge=null,this.addingEdge=!1)}}),o.graph.addBehaviors("addEdge","addEdge"),o.graph.addBehaviors("addNode","addNode")}),ue(oe(o),"changeAnchor",function(e,t){if(!e.target.isKeyShape){var r=e.target._attrs;r.cursor="crosshair",e.target._cfg,("inner"==r.type?r.outer:e.target).animate({r:t?10:7,repeat:!1},500,"easeCubic",null,0)}}),ue(oe(o),"clearSelect",function(){if(o.preSelectNode){var e=o.preSelectNode.getModel();e.selected=!1,o.graph.updateItem(o.preSelectNode,e),o.preSelectNode=null}if(o.preSelectEdge){var t=o.preSelectEdge.getModel();t.selected=!1,o.graph.updateItem(o.preSelectEdge,t),o.preSelectEdge=null}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(r,p),e=r,(t=[{key:"init",value:function(e){ie(ce(r.prototype),"init",this).call(this,e),this.graph&&(this.initNodeEvent(),this.initEdgeEvent(),this.initGlobalEvent(),this.initBehavior(),this.initToolBarEvent())}}])&&ne(e.prototype,t),n&&ne(e,n),r;var e,t,n}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=function(){function n(){var r,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),de(pe((e=this,t=fe(n).call(this),r=!t||"object"!==le(t)&&"function"!=typeof t?pe(e):t)),"onDrag",function(e){r.graph.setMode(e.model),r.graph.refresh()}),de(pe(r),"onEdit",function(e){r.graph.setMode(e.model),r.graph.refresh()}),de(pe(r),"onSelect",function(e){r.graph.setMode(e.model),r.graph.refresh()}),de(pe(r),"onZoomin",function(e){if(r.graph){var t=r.graph.getZoom();r.graph.zoomTo(t+.5)}}),de(pe(r),"onZoomout",function(e){if(r.graph){var t=r.graph.getZoom();r.graph.zoomTo(t-.5)}}),de(pe(r),"onCancel",function(e){}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(n,p),n}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ee=function(){function n(){var t,e,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),we(me((e=this,r=ge(n).call(this),t=!r||"object"!==ye(r)&&"function"!=typeof r?me(e):r)),"getNodes",function(){}),we(me(t),"getLines",function(){}),we(me(t),"updateDatas",function(e){}),we(me(t),"clearDatas",function(){}),we(me(t),"getAllData",function(){}),we(me(t),"addAlarm",function(e,t,r){}),we(me(t),"addAlarms",function(e,t,r){}),we(me(t),"clearAlarm",function(e,t){}),we(me(t),"clearAlarms",function(e,t){}),we(me(t),"getSelectsNode",function(){var e=t.graph.getNodes(),r=[];return e.forEach(function(e){var t=e.getModel();t.selected&&r.push(t)}),r}),we(me(t),"updateSelectNode",function(e){}),we(me(t),"updateNodeById",function(e,t){}),we(me(t),"removeNodeById",function(){}),we(me(t),"removeNodeByIds",function(e){}),we(me(t),"addNode",function(e){}),we(me(t),"getNodeById",function(e){}),we(me(t),"getSelectLine",function(){var e=t.graph.getEdges(),r=[];return e.forEach(function(e){var t=e.getModel();t.selected&&r.push(t)}),r}),we(me(t),"updateLineStyle",function(e,t){}),we(me(t),"removeLineById",function(e){}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(n,p),n}(),_e={click:"Click",contextmenu:"ContextMenu",dblclick:"DoubleClick",drag:"Drag",dragend:"DragEnd",dragenter:"DragEnter",dragleave:"DragLeave",dragstart:"DragStart",drop:"Drop",mousedown:"MouseDown",mouseenter:"MouseEnter",mouseleave:"MouseLeave",mouseover:"MouseMover",mouseup:"MouseUp",mouseout:"MouseOut"},Se={beforeadditem:"onBeforeadditem",afteradditem:"onAfteradditem",beforeremoveitem:"onBeforeremoveitem",afterremoveitem:"onAfterremoveitem",beforeupdateitem:"onBeforeupdateitem",afterupdateitem:"onAfterupdateitem",beforeitemvisibilitychange:"onBeforeitemvisibilitychange",afteritemvisibilitychange:"onAfteritemvisibilitychange",beforeitemstatechange:"onBeforeitemstatechange",afteritemstatechange:"onAfteritemstatechange",beforeitemrefresh:"onBeforeitemrefresh",afteritemrefresh:"onAfteritemrefresh",beforeitemstatesclear:"onBeforeitemstatesclear",afteritemstatesclear:"onAfteritemstatesclear"},Oe=Object.keys(_e),je=Object.keys(Se);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=function(){function o(e){var n,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ne(ke((t=this,r=Te(o).call(this,e),n=!r||"object"!==Pe(r)&&"function"!=typeof r?ke(t):r)),"state",{currentIndex:-1}),Ne(ke(n),"toolbar",null),Ne(ke(n),"onIconClick",function(e,t){var r=-1;e.index!=n.state.currentIndex&&(r=e.index),r=e.index,n.setState({currentIndex:r}),n.toolbar&&n.toolbar["on".concat(e.eventType)](e)}),n.icons=[{name:"拖动",icon:"drag",eventType:"Drag",model:"drag",index:1},{name:"编辑",icon:"edit",eventType:"Edit",model:"edite",index:2},{name:"选择",icon:"select",eventType:"Select",model:"select",index:3},{name:"放大",icon:"zoomin",eventType:"Zoomin",index:4},{name:"缩小",icon:"zoomout",eventType:"Zoomout",index:5},{name:"取消",icon:"cancel",eventType:"Cancel",index:6}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(o,i.a.Component),e=o,(t=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var r=this;return i.a.createElement("div",{className:"toolbar-wrap"},this.icons.map(function(e,t){return i.a.createElement("span",{className:"toolbaricon ".concat(r.state.currentIndex==e.index?"toolbaricon-select":"toolbaricon-unselect"),onClick:r.onIconClick.bind(r,e)},i.a.createElement("span",{className:"icon ".concat(e.icon),title:e.name}))}))}}])&&xe(e.prototype,t),r&&xe(e,r),o;var e,t,r}();function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(r,!0).forEach(function(e){ze(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(6);var He=function(){function o(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ze(Ue((r=this,n=Re(o).call(this,e),t=!n||"object"!==Ce(n)&&"function"!=typeof n?Ue(r):n)),"state",Ie({},t.props)),ze(Ue(t),"componentWillUnmount",function(){window.removeEventListener("resize",t.resize)}),ze(Ue(t),"initUtil",function(){t.g6Api.init(t.graph),t.toolbarUtil.init(t.graph),t.graphEventUtil.init(t.graph),t.registerUtil.init(t.graph)}),ze(Ue(t),"initResizeEvent",function(){window.addEventListener("resize",t.resize)}),ze(Ue(t),"resize",function(){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){},500)}),ze(Ue(t),"addListener",function(e,t,r){"function"==typeof r&&e.on(t,r)}),t.graph=null,t.registerUtil=new E,t.graphEventUtil=new ae,t.toolbarUtil=new be,t.g6Api=new Ee,t.resizeTimer=0,t.sourceRect={width:0,height:0,left:0,top:0,datas:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(o,i.a.Component),e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.test!==t.test?{test:e.test}:null}}],(t=[{key:"componentDidMount",value:function(){var e=this.topoWrap.getBoundingClientRect();e&&(this.graph=new u.a.Graph({container:this.props.el,width:e.width,height:e.height-4,render:"svg",fitView:!1,modes:{addEdge:["addEdge","drag-node"],addNode:["addNode","drag-node"],edite:["drag-node","addEdge","addNode"],show:["drag-canvas","zoom-canvas"],multiselect:["drag-node"],select:["drag-node"],drag:["drag-canvas"]}}),this.sourceRect=Ie({},e,{datas:this.state.datas}),this.initUtil(),this.initEvent(),this.toolbar&&(this.toolbar.toolbar=this.toolbarUtil),this.graph.setMode(this.state.model),this.graph.data(this.state.datas),this.graph.render(),this.graph.setAutoPaint(!0))}},{key:"initEvent",value:function(){var r=this,n=this.addListener;Oe.forEach(function(e){var t=_e[e];n(r.graph,"node:".concat(e),r.props["onNode".concat(t)]),n(r.graph,"edge:".concat(e),r.props["onEdge".concat(t)]),n(r.graph,"canvas:".concat(e),r.props["onCanvas".concat(t)])}),je.forEach(function(e){n(r.page,[e],r.props[Se[e]])})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"topowrap",ref:function(e){t.topoWrap=e}},i.a.createElement("div",{className:"topo-content",id:this.props.el}),this.state.showToolBar?i.a.createElement(De,{ref:function(e){t.toolbar=e}}):null)}}])&&Be(e.prototype,t),r&&Be(e,r),o;var e,t,r}();ze(He,"defaultProps",{el:"topoEl",datas:[],model:"multiselect",nodeMenu:[],edgeMenu:[],showToolBar:!0}),ze(He,"propTypes",{el:c.a.string.isRequired,datas:c.a.array.isRequired});var qe={version:"1.0",author:"maixing",TopoView:He,EventBus:undefined,EventConsts:undefined};t["default"]=qe}],i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=7);function i(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var c,s});