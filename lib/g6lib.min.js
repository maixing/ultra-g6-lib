!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@antv/g6"),require("lodash")):"function"==typeof define&&define.amd?define(["react","@antv/g6","lodash"],t):"object"==typeof exports?exports["g6lib.min.js"]=t(require("react"),require("@antv/g6"),require("lodash")):e["g6lib.min.js"]=t(e.React,e["@antv/g6"],e.lodash)}(window,function(r,n,o){return c={},i.m=s=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,r){e.exports=r(4)()},function(e,t,r){"use strict";var c=r(5);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,o,i){if(i!==c){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),o=r(3),s=r.n(o),c=r(1),u=r.n(c),a="multiselect";function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=null,(t="graph")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}return e=n,(t=[{key:"init",value:function(e){this.graph=e}}])&&l(e.prototype,t),r&&l(e,r),n;var e,t,r}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,r){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=[[0,0],[.5,0],[1,0],[0,.5],[1,.5],[0,1],[.5,1],[1,1]],m=function(){function i(){var s,e,t,r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=d((n=this,o=y(i).call(this),s=!o||"object"!==p(o)&&"function"!=typeof o?d(n):o)),r=function(){u.a.registerNode("nodeStyle",{draw:function(e,t){var r=e.w,n=e.h,o=s.graph.getCurrentMode();e.selected?a==o?t.addShape("image",{attrs:{x:r/2,y:-n/1.2,width:16,height:16,img:"../demo/assets/ck.svg",cursor:"pointer"}}):t.addShape("rect",{attrs:{x:-r/2-s.selectGap,y:-n/2-s.selectGap,width:r+2*s.selectGap,height:n+2*s.selectGap,stroke:"red"}}):a==o&&t.addShape("image",{attrs:{x:r/2,y:-n/1.2,width:16,height:16,img:"../demo/assets/uck.svg"}});var i=t.addShape("image",{attrs:{x:-r/2,y:-n/2,width:r,height:n,cursor:"pointer",img:"../demo/assets/"+e.type+".svg"}});return t.addShape("text",{attrs:{x:0,y:1.1*n,textAlign:"center",text:e.label,fill:"#000"}}),i},getAnchorPoints:function(e){return v}})},(t="registerNode")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,s.selectGap=5,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,f),e=i,(t=[{key:"init",value:function(e){b(y(i.prototype),"init",this).call(this,e),this.registerNode()}}])&&h(e.prototype,t),r&&h(e,r),i;var e,t,r}(),w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function _(e,t){function r(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function E(e){return"function"==typeof e}var O=!1,S={Promise:undefined,set useDeprecatedSynchronousErrorHandling(e){O=e},get useDeprecatedSynchronousErrorHandling(){return O}};function j(e){setTimeout(function(){throw e},0)}var x={closed:!0,next:function(e){},error:function(e){if(S.useDeprecatedSynchronousErrorHandling)throw e;j(e)},complete:function(){}},P=Array.isArray||function(e){return e&&"number"==typeof e.length};function T(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}T.prototype=Object.create(Error.prototype);var k=T,D=function(){function a(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return a.prototype.unsubscribe=function(){var e;if(!this.closed){var t,r=this._parentOrParents,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof a)r.remove(this);else if(null!==r)for(var i=0;i<r.length;++i)r[i].remove(this);if(E(n))try{n.call(this)}catch(u){e=u instanceof k?C(u.errors):[u]}if(P(o)){i=-1;for(var s=o.length;++i<s;){var c=o[i];if(null!==(t=c)&&"object"==typeof t)try{c.unsubscribe()}catch(u){e=e||[],u instanceof k?e=e.concat(C(u.errors)):e.push(u)}}}if(e)throw new k(e)}},a.prototype.add=function(e){var t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){var r=t;(t=new a)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=t._parentOrParents;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[t]:o.push(t),t},a.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},a.EMPTY=((e=new a).closed=!0,e),a}();function C(e){return e.reduce(function(e,t){return e.concat(t instanceof k?t.errors:t)},[])}var M="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),N=function(o){function i(e,t,r){var n=o.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=x;break;case 1:if(!e){n.destination=x;break}if("object"==typeof e){e instanceof i?(n.syncErrorThrowable=e.syncErrorThrowable,(n.destination=e).add(n)):(n.syncErrorThrowable=!0,n.destination=new R(n,e));break}default:n.syncErrorThrowable=!0,n.destination=new R(n,e,t,r)}return n}return _(i,o),i.prototype[M]=function(){return this},i.create=function(e,t,r){var n=new i(e,t,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},i}(D),R=function(c){function e(e,t,r,n){var o,i=c.call(this)||this;i._parentSubscriber=e;var s=i;return E(t)?o=t:t&&(o=t.next,r=t.error,n=t.complete,t!==x&&(E((s=Object.create(t)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=r,i._complete=n,i}return _(e,c),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;S.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=S.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):j(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;j(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};S.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),S.useDeprecatedSynchronousErrorHandling)throw r;j(r)}},e.prototype.__tryOrSetError=function(e,t,r){if(!S.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(n){return S.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0):(j(n),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(N),A="function"==typeof Symbol&&Symbol.observable||"@@observable";function U(){}var B=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,r){var n=this.operator,o=function(e,t,r){if(e){if(e instanceof N)return e;if(e[M])return e[M]()}return e||t||r?new N(e,t,r):new N(x)}(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||S.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),S.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){S.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function tb(t){for(;t;){var r=t,n=r.closed,o=r.destination,i=r.isStopped;if(n||i)return!1;t=o&&o instanceof N?o:null}return!0}(e)&&e.error(t)}},r.prototype.forEach=function(o,e){var t=this;return new(e=I(e))(function(e,r){var n;n=t.subscribe(function(e){try{o(e)}catch(t){r(t),n&&n.unsubscribe()}},r,e)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[A]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:function r(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:U}(e)(this)},r.prototype.toPromise=function(e){var n=this;return new(e=I(e))(function(e,t){var r;n.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},r.create=function(e){return new r(e)},r}();function I(e){if(!(e=e||S.Promise||Promise))throw new Error("no Promise impl found");return e}function z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}z.prototype=Object.create(Error.prototype);var H,L,q=z,G=function(n){function e(e,t){var r=n.call(this)||this;return r.subject=e,r.subscriber=t,r.closed=!1,r}return _(e,n),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},e}(D),V=function(r){function e(e){var t=r.call(this,e)||this;return t.destination=e,t}return _(e,r),e}(N),W=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _(e,t),e.prototype[M]=function(){return new V(this)},e.prototype.lift=function(e){var t=new Y(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new q;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].next(e)},e.prototype.error=function(e){if(this.closed)throw new q;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),o=0;o<r;o++)n[o].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new q;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new q;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new q;return this.hasError?(e.error(this.thrownError),D.EMPTY):this.isStopped?(e.complete(),D.EMPTY):(this.observers.push(e),new G(this,e))},e.prototype.asObservable=function(){var e=new B;return e.source=this,e},e.create=function(e,t){return new Y(e,t)},e}(B),Y=function(n){function e(e,t){var r=n.call(this)||this;return r.destination=e,r.source=t,r}return _(e,n),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):D.EMPTY},e}(W),Z=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new F(e,this.predicate,this.thisArg))},e}(),F=function(o){function e(e,t,r){var n=o.call(this,e)||this;return n.predicate=t,n.thisArg=r,n.count=0,n}return _(e,o),e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)},e}(N),K=r(2),J=new W,Q=new Map,X=(J.pipe((H=function(e){return!!Q.has(e.type)},function(e){return e.lift(new Z(H,L))})).subscribe(function(r){var e=Q.get(r.type);e&&e.map(function(e,t){e&&Object(K.isFunction)(e)&&Object(K.has)(r,"data")&&e.call(null,r.data)})}),function X(e,t){var r=[];Q.has(e)&&(r=Q.get(e)),-1==r.indexOf(t)&&r.push(t),Q.set(e,r)}),$="TOOLBAR_MULTI_SELECT";function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t,r){return(ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce=function(){function r(){var o,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),se(re((e=this,t=oe(r).call(this),o=!t||"object"!==ee(t)&&"function"!=typeof t?re(e):t)),"preSelectNode",null),se(re(o),"preSelectNodes",[]),se(re(o),"edge",null),se(re(o),"addingEdge",!1),se(re(o),"initToolBarEvent",function(){X($,function(e){e||(o.graph.findAll("node",function(e){return e.get("model").x}).forEach(function(e){var t=e._cfg.model;t.selected=!1,o.graph.updateItem(e,t)}),o.preSelectNodes.splice(0))})}),se(re(o),"initNodeEvent",function(){o.graph.on("node:click",function(e){var r=e.item._cfg.model;r.selected=!r.selected;var t=o.graph.getCurrentMode();if(a==t)if(r.selected)o.preSelectNodes.push(r);else{var n=null;o.preSelectNodes.forEach(function(e,t){e.id==r.id&&(n=t)}),n&&o.preSelectNodes.splice(n,1)}else o.preSelectNode&&(o.preSelectNode._cfg.model.selected=!1,o.graph.updateItem(o.preSelectNode,o.preSelectNode._cfg.model)),o.preSelectNode=e.item;o.graph.updateItem(e.item,r)}),o.graph.on("node:mouseover",function(e){o.changeAnchor(e,!0)}),o.graph.on("node:mouseout",function(e){o.changeAnchor(e,!1)})}),se(re(o),"initEdgeEvent",function(){}),se(re(o),"initGlobalEvent",function(){}),se(re(o),"initBehavior",function(){u.a.registerBehavior("addNode",{getEvents:function(){return{"canvas:click":"onClick"}},onClick:function(e){this.graph.addItem("node",{w:48,h:48,type:"default",shape:"nodeStyle",label:"ellipse",img:"../demo/assets/123.svg",selected:!1,x:e.x,y:e.y,id:u.a.Util.uniqueId()})}}),u.a.registerBehavior("addEdge",{getEvents:function(){return{"node:click":"onClick",mousemove:"onMousemove","edge:click":"onEdgeClick"}},onClick:function(e){var t=e.item,r={x:e.x,y:e.y},n=t.getModel();this.addingEdge&&this.edge?(this.graph.updateItem(this.edge,{target:n.id}),this.edge=null,this.addingEdge=!1):(this.edge=this.graph.addItem("edge",{source:n.id,target:r}),this.addingEdge=!0)},onMousemove:function(e){var t={x:e.x,y:e.y};this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t})},onEdgeClick:function(e){var t=e.item;this.addingEdge&&this.edge==t&&(this.graph.removeItem(this.edge),this.edge=null,this.addingEdge=!1)}}),o.graph.addBehaviors("addEdge","addEdge"),o.graph.addBehaviors("addNode","addNode")}),se(re(o),"changeAnchor",function(e,t){if(!e.target.isKeyShape){var r=e.target._attrs;r.cursor="crosshair",e.target._cfg,("inner"==r.type?r.outer:e.target).animate({r:t?10:7,repeat:!1},500,"easeCubic",null,0)}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(r,f),e=r,(t=[{key:"init",value:function(e){ne(oe(r.prototype),"init",this).call(this,e),this.graph&&(this.initNodeEvent(),this.initEdgeEvent(),this.initGlobalEvent(),this.initBehavior(),this.initToolBarEvent())}}])&&te(e.prototype,t),n&&te(e,n),r;var e,t,n}();function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var he=function(){function n(){var r,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),pe(le((e=this,t=ae(n).call(this),r=!t||"object"!==ue(t)&&"function"!=typeof t?le(e):t)),"onDrag",function(e){}),pe(le(r),"onEdit",function(e){}),pe(le(r),"onSelect",function(e){}),pe(le(r),"onZoomin",function(e){if(r.graph){var t=r.graph.getZoom();r.graph.zoomTo(t+.5)}}),pe(le(r),"onZoomout",function(e){if(r.graph){var t=r.graph.getZoom();r.graph.zoomTo(t-.5)}}),pe(le(r),"onCancel",function(e){}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(n,f),n}(),de={click:"Click",contextmenu:"ContextMenu",dblclick:"DoubleClick",drag:"Drag",dragend:"DragEnd",dragenter:"DragEnter",dragleave:"DragLeave",dragstart:"DragStart",drop:"Drop",mousedown:"MouseDown",mouseenter:"MouseEnter",mouseleave:"MouseLeave",mouseover:"MouseMover",mouseup:"MouseUp",mouseout:"MouseOut"},be={beforeadditem:"onBeforeadditem",afteradditem:"onAfteradditem",beforeremoveitem:"onBeforeremoveitem",afterremoveitem:"onAfterremoveitem",beforeupdateitem:"onBeforeupdateitem",afterupdateitem:"onAfterupdateitem",beforeitemvisibilitychange:"onBeforeitemvisibilitychange",afteritemvisibilitychange:"onAfteritemvisibilitychange",beforeitemstatechange:"onBeforeitemstatechange",afteritemstatechange:"onAfteritemstatechange",beforeitemrefresh:"onBeforeitemrefresh",afteritemrefresh:"onAfteritemrefresh",beforeitemstatesclear:"onBeforeitemstatesclear",afteritemstatesclear:"onAfteritemstatesclear"},ye=Object.keys(de),ge=Object.keys(be);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=function(){function o(e){var n,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Oe(_e((t=this,r=we(o).call(this,e),n=!r||"object"!==ve(r)&&"function"!=typeof r?_e(t):r)),"state",{currentIndex:-1}),Oe(_e(n),"toolbar",null),Oe(_e(n),"onIconClick",function(e,t){var r=-1;e.index!=n.state.currentIndex&&(r=e.index),r=e.index,n.setState({currentIndex:r}),n.toolbar&&n.toolbar["on".concat(e.eventType)](e)}),n.icons=[{name:"拖动",icon:"drag",eventType:"Drag",index:1},{name:"编辑",icon:"edit",eventType:"Edit",index:2},{name:"选择",icon:"select",eventType:"Select",index:3},{name:"放大",icon:"zoomin",eventType:"Zoomin",index:4},{name:"缩小",icon:"zoomout",eventType:"Zoomout",index:5},{name:"取消",icon:"cancel",eventType:"Cancel",index:6}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(o,i.a.Component),e=o,(t=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var r=this;return i.a.createElement("div",{className:"toolbar-wrap"},this.icons.map(function(e,t){return i.a.createElement("span",{className:"toolbaricon ".concat(r.state.currentIndex==e.index?"toolbaricon-select":"toolbaricon-unselect"),onClick:r.onIconClick.bind(r,e)},i.a.createElement("span",{className:"icon ".concat(e.icon),title:e.name}))}))}}])&&me(e.prototype,t),r&&me(e,r),o;var e,t,r}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xe(r,!0).forEach(function(e){Me(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xe(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(6);var Ne=function(){function o(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Me(De((r=this,n=ke(o).call(this,e),t=!n||"object"!==je(n)&&"function"!=typeof n?De(r):n)),"state",Pe({},t.props)),Me(De(t),"componentWillUnmount",function(){window.removeEventListener("resize",t.resize)}),Me(De(t),"initUtil",function(){t.toolbarUtil.init(t.graph),t.graphEventUtil.init(t.graph),t.registerUtil.init(t.graph)}),Me(De(t),"initResizeEvent",function(){window.addEventListener("resize",t.resize)}),Me(De(t),"resize",function(){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){},500)}),Me(De(t),"addListener",function(e,t,r){"function"==typeof r&&e.on(t,r)}),t.graph=null,t.registerUtil=new m,t.graphEventUtil=new ce,t.toolbarUtil=new he,t.resizeTimer=0,t.sourceRect={width:0,height:0,left:0,top:0,datas:[]},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(o,i.a.Component),e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.test!==t.test?{test:e.test}:null}}],(t=[{key:"componentDidMount",value:function(){var e=this.topoWrap.getBoundingClientRect();e&&(this.graph=new u.a.Graph({container:this.props.el,width:e.width,height:e.height-4,fitView:!1,modes:{addEdge:["addEdge","drag-node"],addNode:["addNode","drag-node"],edite:["drag-node"],show:["drag-canvas","zoom-canvas"],multiselect:["drag-node"]}}),this.sourceRect=Pe({},e,{datas:this.state.datas}),this.initUtil(),this.initEvent(),this.toolbar&&(this.toolbar.toolbar=this.toolbarUtil),this.graph.data(this.state.datas),this.graph.render(),this.graph.setMode("addNode"),this.graph.setAutoPaint(!0))}},{key:"initEvent",value:function(){var r=this,n=this.addListener;ye.forEach(function(e){var t=de[e];n(r.graph,"node:".concat(e),r.props["onNode".concat(t)]),n(r.graph,"edge:".concat(e),r.props["onEdge".concat(t)]),n(r.graph,"canvas:".concat(e),r.props["onCanvas".concat(t)])}),ge.forEach(function(e){n(r.page,[e],r.props[be[e]])})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"topowrap",ref:function(e){t.topoWrap=e}},i.a.createElement("div",{className:"topo-content",id:this.props.el}),this.state.showToolBar?i.a.createElement(Se,{ref:function(e){t.toolbar=e}}):null)}}])&&Te(e.prototype,t),r&&Te(e,r),o;var e,t,r}();Me(Ne,"defaultProps",{el:"topoEl",datas:[],nodeMenu:[],edgeMenu:[],showToolBar:!0}),Me(Ne,"propTypes",{el:s.a.string.isRequired,datas:s.a.array.isRequired});var Re={version:"1.0",author:"maixing",TopoView:Ne,EventBus:undefined,EventConsts:undefined};t["default"]=Re}],i.c=c,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=7);function i(e){if(c[e])return c[e].exports;var t=c[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var s,c});